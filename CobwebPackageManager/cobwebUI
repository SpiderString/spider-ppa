--Can be bound to ChatSendFilter or to a key
local args={...}

local cli=run("commandLib.lua")
function help()

end
--trigger ui
if args[1]:lower()=="key" then
  --ui code goes here

--parse commands
elseif args[1]:lower()=="event" and args[2]:lower()=="chatsendfilter" then
  run("fileLib")
  local settings=readConfig()

  local command=cli.getArguments(args[3], settings.commandPrefix)
  if command then
    --begin command matching
    if command[1]=="update" then
      run("fileLib")
      if command[2] then
        getRepositories(command[2])
      else
        getRepositories()
      end
    elseif command[1]=="upgrade" then
      run("autoUpdate", true)
    elseif command[1]=="install" and command[2] then
      run("fileLib")
      if settings.autoUpdatePackages then
        getRepositories(command[3])
      end
      getPackage(command[2], command[3])
    elseif command[1]=="remove" and command[2] then
      run("fileLib")
      removePackage(command[2])
    elseif command[1]=="help" then
      help()
    elseif command[1]=="list" then
      listPackages()
    end
  else
    return args[3]
  end
end
